this.createjs=this.createjs||{},function(){"use strict";function a(a){this.Container_constructor(),this.prevEffect="",this.nextEffect="",this.joinHandler=null,this.leaveHandler=null,this._prevFliperSheet=a,this._nextFliperSheet=null,a&&(a._nextFliperSheet=this),this._mosaic=null,this._fliper=null}var b=createjs.extend(a,createjs.Container);a._EFFECTS=["default","translation","scanning"],b.completeJoin=function(){this._fliper._joinRelated()},b.completeLeave=function(){this._fliper._leaveRelated()},b.setMosaic=function(a){var b=new createjs.SpriteSheet({animations:{show:{frames:[4,3,2,1,0],next:"show_end",speed:.4},show_end:{frames:[0]},hide:{frames:[0,1,2,3,4],next:"hide_end",speed:.4},hide_end:{frames:[4]}},images:[a],frames:{height:a.height/5,width:a.width,regX:0,regY:0,count:5}});this._mosaic=new createjs.Sprite(b)},b.toString=function(){return"[FliperSheet]"},createjs.FliperSheet=createjs.promote(a,"Container")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b){this.EventDispatcher_constructor(),this.turnEffect="default",this._sheet=a,this._stage=b,this._w=b.canvas.width,this._h=b.canvas.height,this._mask=new createjs.Shape,this._mask.graphics.beginFill("#0000ff").drawRect(0,0,this._w,this._h),this._mask.visible=!1,this._stage.addChild(this._mask),this._stage.addChild(this._sheet);for(var a=this._sheet;a;)a._fliper=this,a=a._nextFliperSheet;this._effectComplete(),this._turnAble=!0,this._turnDirection="next"}var b=createjs.extend(a,createjs.EventDispatcher);b.turnPrev=function(){this._turnAble&&this._sheet&&this._sheet._prevFliperSheet&&(this._turnAble=!1,this._turnDirection="prev",this._sheet.leaveHandler?this._sheet.leaveHandler():this._leaveRelated())},b.turnNext=function(){this._turnAble&&this._sheet&&this._sheet._nextFliperSheet&&(this._turnAble=!1,this._turnDirection="next",this._sheet.leaveHandler?this._sheet.leaveHandler():this._leaveRelated())},b.toString=function(){return"[Fliper]"},b._defaultPrevEffect=function(){var a=this,b=0;this._sheet._mosaic&&(b=200,this._sheet.addChild(this._sheet._mosaic),this._sheet._mosaic.gotoAndPlay("hide")),this._sheet._prevFliperSheet.x=this._sheet._prevFliperSheet.y=0,this._stage.addChildAt(this._sheet._prevFliperSheet,0),this._sheet._prevFliperSheet._mosaic&&(this._sheet._prevFliperSheet.addChild(this._sheet._prevFliperSheet._mosaic),this._sheet._prevFliperSheet._mosaic.gotoAndStop("show_end")),createjs.Tween.get(this._sheet).wait(b).call(function(){a._sheet._mosaic&&a._sheet.removeChild(a._sheet._mosaic),a._stage.removeChild(a._sheet),a._sheet=a._sheet._prevFliperSheet;var b=0;a._sheet._mosaic&&(a._sheet._mosaic.gotoAndPlay("show"),b=200),createjs.Tween.get(a._sheet).wait(b).call(function(){a._sheet._mosaic&&a._sheet.removeChild(a._sheet._mosaic),a._effectComplete()})})},b._defaultNextEffect=function(){var a=this,b=0;this._sheet._mosaic&&(b=200,this._sheet.addChild(this._sheet._mosaic),this._sheet._mosaic.gotoAndPlay("hide")),this._sheet._nextFliperSheet.x=this._sheet._nextFliperSheet.y=0,this._stage.addChildAt(this._sheet._nextFliperSheet,0),this._sheet._nextFliperSheet._mosaic&&(this._sheet._nextFliperSheet.addChild(this._sheet._nextFliperSheet._mosaic),this._sheet._nextFliperSheet._mosaic.gotoAndStop("show_end")),createjs.Tween.get(this._sheet).wait(b).call(function(){a._sheet._mosaic&&a._sheet.removeChild(a._sheet._mosaic),a._stage.removeChild(a._sheet),a._sheet=a._sheet._nextFliperSheet;var b=0;a._sheet._mosaic&&(a._sheet._mosaic.gotoAndPlay("show"),b=200),createjs.Tween.get(a._sheet).wait(b).call(function(){a._sheet._mosaic&&a._sheet.removeChild(a._sheet._mosaic),a._effectComplete()})})},b._translationPrevEffect=function(){var a=this,b=0;this._sheet._mosaic&&(b=200,this._sheet.addChild(this._sheet._mosaic),this._sheet._mosaic.gotoAndPlay("hide")),this._sheet._prevFliperSheet.y=-this._h,this._stage.addChild(this._sheet._prevFliperSheet),this._sheet._prevFliperSheet._mosaic&&(this._sheet._prevFliperSheet.addChild(this._sheet._prevFliperSheet._mosaic),this._sheet._prevFliperSheet._mosaic.gotoAndPlay("hide_end")),createjs.Tween.get(this._sheet).wait(b).to({y:a._h},500),createjs.Tween.get(this._sheet._prevFliperSheet).wait(b).to({y:0},500).call(function(){a._sheet._mosaic&&a._sheet.removeChild(a._sheet._mosaic),a._stage.removeChild(a._sheet),a._sheet=a._sheet._prevFliperSheet;var b=0;a._sheet._mosaic&&(b=200,a._sheet._mosaic.gotoAndPlay("show")),createjs.Tween.get(a._sheet).wait(b).call(function(){a._sheet._mosaic&&a._sheet.removeChild(a._sheet._mosaic),a._effectComplete()})})},b._translationNextEffect=function(){var a=this,b=0;this._sheet._mosaic&&(b=200,this._sheet.addChild(this._sheet._mosaic),this._sheet._mosaic.gotoAndPlay("hide")),this._sheet._nextFliperSheet.y=this._h,this._stage.addChild(this._sheet._nextFliperSheet),this._sheet._nextFliperSheet._mosaic&&(this._sheet._nextFliperSheet.addChild(this._sheet._nextFliperSheet._mosaic),this._sheet._nextFliperSheet._mosaic.gotoAndPlay("hide_end")),createjs.Tween.get(this._sheet).wait(b).to({y:-a._h},500),createjs.Tween.get(this._sheet._nextFliperSheet).wait(b).to({y:0},500).call(function(){a._sheet._mosaic&&a._sheet.removeChild(a._sheet._mosaic),a._stage.removeChild(a._sheet),a._sheet=a._sheet._nextFliperSheet;var b=0;a._sheet._mosaic&&(b=200,a._sheet._mosaic.gotoAndPlay("show")),createjs.Tween.get(a._sheet).wait(b).call(function(){a._sheet._mosaic&&a._sheet.removeChild(a._sheet._mosaic),a._effectComplete()})})},b._scanningPrevEffect=function(){var a=this,b=0;this._sheet._mosaic&&(this._sheet.addChild(this._sheet._mosaic),this._sheet._mosaic.gotoAndPlay("hide"),b=200),this._mask.x=this._mask.y=0,createjs.Tween.get(this._mask).wait(b).call(function(){a._sheet._prevFliperSheet.x=a._sheet._prevFliperSheet.y=0,a._stage.addChildAt(a._sheet._prevFliperSheet,0),a._sheet.mask=a._mask,a._sheet._prevFliperSheet._mosaic&&(a._sheet._prevFliperSheet.addChild(a._sheet._prevFliperSheet._mosaic),a._sheet._prevFliperSheet._mosaic.gotoAndPlay("hide_end"))}).to({y:a._h},500,createjs.Ease.quintInOut).call(function(){a._sheet._mosaic&&a._sheet.removeChild(a._sheet._mosaic),a._stage.removeChild(a._sheet),a._sheet.mask=null,a._sheet=a._sheet._prevFliperSheet;var b=0;a._sheet._mosaic&&(b=200,a._sheet._mosaic.gotoAndPlay("show")),createjs.Tween.get(a._mask).wait(b).call(function(){a._sheet._mosaic&&a._sheet.removeChild(a._sheet._mosaic),a._effectComplete()})})},b._scanningNextEffect=function(){var a=this,b=0;this._sheet._mosaic&&(this._sheet.addChild(this._sheet._mosaic),this._sheet._mosaic.gotoAndPlay("hide"),b=200),this._mask.x=this._mask.y=0,createjs.Tween.get(this._mask).wait(b).call(function(){a._sheet._nextFliperSheet.x=a._sheet._nextFliperSheet.y=0,a._stage.addChildAt(a._sheet._nextFliperSheet,0),a._sheet.mask=a._mask,a._sheet._nextFliperSheet._mosaic&&(a._sheet._nextFliperSheet.addChild(a._sheet._nextFliperSheet._mosaic),a._sheet._nextFliperSheet._mosaic.gotoAndPlay("hide_end"))}).to({y:-a._h},500,createjs.Ease.quintInOut).call(function(){a._sheet._mosaic&&a._sheet.removeChild(a._sheet._mosaic),a._stage.removeChild(a._sheet),a._sheet.mask=null,a._sheet=a._sheet._nextFliperSheet;var b=0;a._sheet._mosaic&&(b=200,a._sheet._mosaic.gotoAndPlay("show")),createjs.Tween.get(a._mask).wait(b).call(function(){a._sheet._mosaic&&a._sheet.removeChild(a._sheet._mosaic),a._effectComplete()})})},b._effectComplete=function(){this._sheet.joinHandler?this._sheet.joinHandler():this._joinRelated()},b._joinRelated=function(){this._turnAble=!0},b._leaveRelated=function(){var a;"prev"==this._turnDirection?(a=createjs.indexOf(createjs.FliperSheet._EFFECTS,this._sheet.prevEffect),-1==a?this["_"+this.turnEffect+"PrevEffect"].call(this):this["_"+this._sheet.prevEffect+"PrevEffect"].call(this)):"next"==this._turnDirection&&(a=createjs.indexOf(createjs.FliperSheet._EFFECTS,this._sheet.nextEffect),-1==a?this["_"+this.turnEffect+"NextEffect"].call(this):this["_"+this._sheet.nextEffect+"NextEffect"].call(this))},createjs.Fliper=createjs.promote(a,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){var d=this._drawImage(a,b,c);this.Bitmap_constructor(d)}var b=createjs.extend(a,createjs.Bitmap);b.screenshot=function(a,b,c){var d,e,f;return a.cache(0,0,b,c),d=a.getCacheDataURL(),e=new Image,e.src=d,f=new createjs.Bitmap(e),a.uncache(),f},b.toString=function(){return"[Mosaic]"},b._drawImage=function(a,b,c){var d,e,f,g,h;return a.cache(0,0,b,c),d=a.cacheCanvas,e=d.getContext("2d").getImageData(0,0,b,c),f=document.createElement("canvas"),f.width=b,f.height=5*c,g=f.getContext("2d").createImageData(b,c),this._drawMosaic(e.data,g.data,b,c,10),f.getContext("2d").putImageData(g,0,0),this._drawMosaic(e.data,g.data,b,c,20),f.getContext("2d").putImageData(g,0,c),this._drawMosaic(e.data,g.data,b,c,40),f.getContext("2d").putImageData(g,0,2*c),this._drawMosaic(e.data,g.data,b,c,70),f.getContext("2d").putImageData(g,0,3*c),this._drawMosaic(e.data,g.data,b,c,100),f.getContext("2d").putImageData(g,0,4*c),h=new Image,h.src=f.toDataURL(),a.uncache(),h},b._clamp=function(a,b,c){return Math.min(c,Math.max(b,a))},b._drawMosaic=function(a,b,c,d,e){var h,i,j,k,l,m,n,o,p,q,r,f,g,t,u,v;for(e=this._clamp(e,1,Math.max(c,d)),f=Math.ceil(d/e),g=Math.ceil(c/e),o=0,h=0,n=0;f>o;o++){for(i=this._clamp(h+e,0,d),p=0,j=0;g>p;p++,n++){for(k=this._clamp(j+e,0,c),l=h*c+j<<2,t=a[l],u=a[l+1],v=a[l+2],q=h;i>q;q++)for(r=j;k>r;r++)m=q*c+r<<2,b[m]=t,b[m+1]=u,b[m+2]=v,b[m+3]=a[m+3];j=k}h=i}},createjs.Mosaic=createjs.promote(a,"Bitmap")}();